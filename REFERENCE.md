# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

**Classes**

* [`gitlab_ci_runner`](#gitlab_ci_runner): This module installs and configures Gitlab CI Runners.

**Defined types**

* [`gitlab_ci_runner::runner`](#gitlab_ci_runnerrunner): This module installs and configures Gitlab CI Runners.

## Classes

### gitlab_ci_runner

This module installs and configures Gitlab CI Runners.

#### Examples

##### Simple runner registration

```puppet
class { 'gitlab_ci_runner':
  runners => {
 	 example_runner => {
 		 'registration-token' => 'gitlab-token',
 		 'url'                => 'https://gitlab.com',
 		 'tag-list'           => 'docker,aws',
 	 },
  },
}
```

#### Parameters

The following parameters are available in the `gitlab_ci_runner` class.

##### `runners`

Data type: `Hash`

Hashkeys are used as $title in runners.pp. The subkeys have to be named as the parameter names from ´gitlab-runner register´ command cause they're later joined to one entire string using 2 hyphen to look like shell command parameters. See ´https://docs.gitlab.com/runner/register/#one-line-registration-command´ for details.

##### `runner_defaults`

Data type: `Hash`

A hash with defaults which will be later merged with $runners.

##### `xz_package_name`

Data type: `String`

The name of the 'xz' package. Needed for local docker installations.

##### `concurrent`

Data type: `Optional[Integer]`

Limits how many jobs globally can be run concurrently. The most upper limit of jobs using all defined runners. 0 does not mean unlimited!

Default value: `undef`

##### `builds_dir`

Data type: `Optional[String]`

Absolute path to a directory where builds will be stored in context of selected executor (Locally, Docker, SSH).

Default value: `undef`

##### `cache_dir`

Data type: `Optional[String]`

Absolute path to a directory where build caches will be stored in context of selected executor (locally, Docker, SSH). If the docker executor is used, this directory needs to be included in its volumes parameter.

Default value: `undef`

##### `metrics_server`

Data type: `Optional[Pattern[/.*:.+/]]`

[host]:<port> to enable metrics server as described in https://docs.gitlab.com/runner/monitoring/README.html#configuration-of-the-metrics-http-server

Default value: `undef`

##### `sentry_dsn`

Data type: `Optional[String]`

Enable tracking of all system level errors to sentry.

Default value: `undef`

##### `manage_docker`

Data type: `Boolean`

If docker should be installs (uses the puppetlabs-docker).

Default value: `true`

##### `manage_repo`

Data type: `Boolean`

If the repository should be managed.

Default value: `true`

##### `package_ensure`

Data type: `String`

The package 'ensure' state.

Default value: installed

##### `package_name`

Data type: `String`

The name of the package.

Default value: 'gitlab-runner'

##### `repo_base_url`

Data type: `Stdlib::HTTPUrl`

The base repository url.

Default value: 'https://packages.gitlab.com'

##### `repo_keyserver`

Data type: `Stdlib::Fqdn`

The keyserver which should be used to get the repository key.

Default value: 'keys.gnupg.net'

##### `config_path`

Data type: `String`

The path to the config file of Gitlab runner.

Default value: '/etc/gitlab-runner/config.toml'

## Defined types

### gitlab_ci_runner::runner

This module installs and configures Gitlab CI Runners.

#### Parameters

The following parameters are available in the `gitlab_ci_runner::runner` defined type.

##### `binary`

Data type: `String`

The name of the Gitlab runner binary.

##### `runners_hash`

Data type: `Hash`

Hash with configuration for runners.

##### `default_config`

Data type: `Hash`

Hash with default configration for runners. This will be merged with the runners_hash config.

Default value: {}

